<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Sandwich news</title>
  <link rel="shortcut icon" href="/static/images/sandwich-black.png">	
  <link rel="stylesheet" href="/static/css/blog.css">
  <link rel="stylesheet" href="https://unpkg.com/tachyons/css/tachyons.min.css">  
	<link rel="alternate" type="application/rss+xml" title="My Blog Feed" href="/rss.xml">
  <style type="text/css">

   </style>
</head>
<body class="w-100 sans-serif bg-white">
  <main>
    <div data-name="component" > <!-- style="background-color: #eb6864"> -->
      <nav class="dt w-100 border-box pa2 ph5-ns">
         <a class="dtc v-mid white link dim w-25" href="/" title="Home">
           <img src="/static/images/sandwich-black.png" class="dib w2 h2 br-100" alt="Site Name">
         </a>
         <div class="dtc v-mid w-75 tr">
           <a class="link underline-hover black f5 f4-ns dn dib-l mr3 mr3-ns" href="/tag/technology/" title="Technology">technology</a>
           <a class="link underline-hover black f5 f4-ns dib dn-l mr3 mr3-ns" href="/tag/technology/" title="Technology">tech üíª</a>           

           <a class="link underline-hover black f5 f4-ns dn dib-l mr3 mr3-ns" href="/tag/photography/" title="Photography">photography</a>
           <a class="link underline-hover black f5 f4-ns dib dn-l mr3 mr3-ns" href="/tag/photography/" title="Photography">photo üì∑</a>
           
           <a class="link underline-hover black f5 f4-ns dn dib-l mr3 mr3-ns" href="/tag/sandwich/" title="Sandwiches">sandwiches</a>
           <a class="link underline-hover black f5 f4-ns dib dn-l mr3 mr3-ns" href="/tag/sandwich/" title="Sandwiches">`wich üçû</a>
         </div>
      </nav>
  </div>
  
<article class="">
    <header style="background-color: rgba(0, 3, 0, 0.03)"
    class="aventir ph3 ph4-ns pv1 pv2-ns">
        <h1 class="f3 fw8 f2-m f1-l mb2">
          args4j-helpers</h1>
        <time class="f5 f4-l db fw4 mb4">
          February 26, 2014
        </time>
      </header>
  <div class="ph3 center serif pt2 measure-wide lh-copy f4">
    <p>I really like using <a href="http://args4j.kohsuke.org/">args4j</a> for command-line parsing in both java, and scala, but I found myself writing the same boilerplately code to parse options, deal with help, deal with parsing issues, etc.  <a href="https://github.com/ogrodnek/args4j-helpers">args4j-helpers</a> is a project that simplifies parsing with args4j.</p>
<p>It provides typical option parsing error handling:</p>
<ul>
<li>If help (provided via <code>OptionWithHelp</code> base trait bound to <code>--help</code> and <code>-h</code>) is requested, print usage information to stderr, exit with code <code>0</code>.</li>
<li>If a required option is missing (<code>required=true</code>), print usage information to stderr, exit with code <code>1</code> (unless help was requested).</li>
</ul>
<p>This typical parsing code:</p>
<pre><code>class Options {
  import org.kohsuke.args4j.Option

  @Option(name="--help", aliases=Array("-h"), usage="show this message")
  var help = false

  @Option(name="--blah", aliases=Array("-b"), usage="some val", metaVar="BLAH")
  var blah: Int = 0
}

def main(args: Array[String]) {
  val options = new Options
  val parser = new CmdLineParser(options)

  try {
    parser.parseArgument(args : _*)

    if (options.help) {
      parser.printUsage(System.err)
      sys.exit(0)
    }
  } catch {
    case e: CmdLineException =&gt; {
      System.err.println(e.getMessage)
      parser.printUsage(System.err)
      sys.exit(1)
    }
  }
}
</code></pre>
<p>can be simplified as:</p>
<pre><code>class Options extends OptionsWithHelp {
  import org.kohsuke.args4j.Option

  @Option(name="--blah", aliases=Array("-b"), usage="some val", metaVar="BLAH")
  var blah: Int = 0
}

def main(args: Array[String]) {
  val options = optionsOrExit(args, new Options)
}
</code></pre>
<p>Additionally, the helper class handles the case where help is requested and required arguments are missing (which is missing from the simplified boilerplate code).</p>
<p>The code is in scala, and <a href="https://github.com/ogrodnek/args4j-helpers">available on github</a>.</p>
<p>In the future, I'd like to extend it to add better support for more scala-ish types (<code>Option</code>, <code>Seq</code>, etc., which should be mostly possible by implementing additional args4j OptionHandlers).</p>
  </div>
  <div class="ph3 center serif pt2 measure-wide lh-copy f4">
      
         <a class="f4 link dim br1 ba ph3 pv2 mb2 dib black"
         href="/tag/technology/">technology</a>
      
         <a class="f4 link dim br1 ba ph3 pv2 mb2 dib black"
         href="/tag/code/">code</a>
      
         <a class="f4 link dim br1 ba ph3 pv2 mb2 dib black"
         href="/tag/scala/">scala</a>
      
    </div>
</article>
<article style="background-color: rgba(0, 3, 0, 0.03)" class="mt4 ph3 ph6-ns pv4 bt b--light-gray bb">
    <h1 class="ttu tracked f6">Related</h1>
    <ul class="list pl0">
      
      <li class="pl0">
        <a href="/posts/2016/03/16/pushing-bytes-is-expensive.html" class="link dim near-black db f4 pv2" title="Pushing bytes is expensive">
          Pushing bytes is expensive
          <span>‚Ä∫</span>
        </a>
      </li>
      
      <li class="pl0">
        <a href="/posts/2016/03/15/aws-podcast.html" class="link dim near-black db f4 pv2" title="AWS Podcast">
          AWS Podcast
          <span>‚Ä∫</span>
        </a>
      </li>
      
      <li class="pl0">
        <a href="/posts/2014/02/14/crucible-survivor-code-review-dashboard.html" class="link dim near-black db f4 pv2" title="Crucible Survivor - a code review dashboard">
          Crucible Survivor - a code review dashboard
          <span>‚Ä∫</span>
        </a>
      </li>
      
      <li class="pl0">
        <a href="/posts/2013/02/15/reader-driven-development.html" class="link dim near-black db f4 pv2" title="Reader Driven Development">
          Reader Driven Development
          <span>‚Ä∫</span>
        </a>
      </li>
      
      <li class="pl0">
        <a href="/posts/2012/06/13/golden-rule-of-programming-style.html" class="link dim near-black db f4 pv2" title="The golden rule of programming style">
          The golden rule of programming style
          <span>‚Ä∫</span>
        </a>
      </li>
      
      <li class="pl0">
        <a href="/posts/2012/03/13/on-code-reviews-and-developer-feedback.html" class="link dim near-black db f4 pv2" title="On Code Reviews and Developer Feedback">
          On Code Reviews and Developer Feedback
          <span>‚Ä∫</span>
        </a>
      </li>
      
      <li class="pl0">
        <a href="/posts/2011/10/10/the-story-of-hod.html" class="link dim near-black db f4 pv2" title="the story of HOD - ahead of its time, obsolete at launch">
          the story of HOD - ahead of its time, obsolete at launch
          <span>‚Ä∫</span>
        </a>
      </li>
      
    </ul>
</article>
            
  </main>
  
  <footer class="pa3 pa4-l black-70 bt b--black-10">
      <div class="mb4-l cf">
        <article class="fl w-50 dib-ns w-auto-ns mr4-m mr5-l mb4 pr2 pr0-ns">
          <h4 class="f5 f4-l fw6">Sandwich News</h4>
          <img width="130" src="http://sandwichnews.org/static/images/ogrodnek2.png" />
          <span class="pt1 f7 f6-l db black-70">¬© Larry Ogrodnek 2011-2018.</span>
        </article>
        <article class="fl w-50 dib-ns w-auto-ns mr4-m mr5-l mb4 pl2 pl0-ns">
          <h4 class="f5 f4-l fw5">Elsewhere</h4>
          <p>
              <li><a href="http://engineers.coffee/">Engineers &amp; Coffee</a></li>
              <li><a href="http://analogmachines.com/">Analog Machines</a></li>
              <li><a href="https://github.com/ogrodnek">GitHub</a></li>
              <li><a href="https://twitter.com/ogrodnek">Twitter</a></li>
              <li><a href="https://flickr.com/logrodnek">Flickr</a></li>
            </p>
        </article>
        <article class="fl w-50 dib-ns w-auto-ns mr4-m mr5-l mb4 pr2 pr0-ns">
          <h4 class="f5 f4-l fw5">Other stuff</h4>
          <p>
              <li><a href="/about.html">About</a></li>
              <li><a href="/rss.xml">RSS</a></li>
            </p>          
        </article>
      </div>
    </footer>
</body>
</html>